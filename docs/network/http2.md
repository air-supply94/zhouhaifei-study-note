---
title: HTTP2
order: 12
---

## 思路

一个域名只使用一个 TCP 长连接和消除队头阻塞问题

## 改进

### ⼆进制格式

头信息和数据体都是二进制,头信息帧和数据帧

### 头部压缩

所有字段都会存入头信息表，生成一个索引号，同样字段只发送索引号(HPACK 算法)

### 多路复⽤

可以将请求分成一帧一帧的数据去传输

- 首先，浏览器构建请求报文
- 这些数据经过二进制分帧层处理之后，会被转换为一个个带有请求 ID 编号的帧，通过协议栈将这些帧发送给服务器
- 服务器接收到所有帧之后，会将所有相同 ID 的帧合并为一条完整的请求信息
- 响应同上

### 服务器推送

### 可以设置请求的优先级

## 缺陷

### TCP 队头阻塞

一旦丢包， 连接中的所有 HTTP 请求都必须等待这个丢了包被重传回来

### TCP 建立连接的延时
