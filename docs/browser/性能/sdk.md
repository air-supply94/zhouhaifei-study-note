---
title: sdk
order: 2
---

## 接入设计

- 自动初始化和运行
- 参数
- 公共 api
- ExtensionAPI
- umd 直接打包到 oss
- 文档
- 分析小助手(查看内部 instance)

## 运行设计

- 各类页面
- 项目区分(jquery、js、ts)
- PC 端，移动端，小程序端
- 尽可能用原生 js
- 不要因为 SDK 的报错影响业务

## 上报策略设计

### 日志数据过滤

- 计算错误导致的异常数据: 负值或者非数值数据
- 合法异常值、极大值、极小值: 属于网络断掉或者超时形成的数值

### 数据抽样策略

- 全量
- 抽样

### 上报机制选择

- 强网环境直接进行上报
- 弱网环境将日志存储到本地,延时到强网下再上报
- App 空闲直接上报
- App 忙碌等到空闲再上报(凌晨 2-3 点)
- 批量数据上报

## 主要参数

### `终端类型(全局)`

- pc
- h5
- 小程序
- app

### `产品类型(全局)`

### `唯一 id`

- pc2 种方案: cookie 和浏览器 id(精确更高的需要收费)

### `抽样概率(全局)`

- 前期默认 1,后期稳定再抽样
- 异常数据不抽样直接上传

### `指标类型(局部)`

### `页面路径(局部)`

异常统计需要

## 展示说明

- 默认统计今天所有数据。当时间为今天,分布图 x 轴为小时,其它为天
- 可以按终端类型统计
- 可以按产品类型统计
- 可以按时间统计
- 时间单位毫秒

## 公共参数

- `终端类型`
- `产品类型`
- `指标类型`
- `指标值(首屏的支持多个一起传)`
